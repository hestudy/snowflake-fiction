---
description: 将小说文本转换为各平台投稿格式。当用户说"导出小说"、"转换为平台格式"、"番茄格式"、"起点格式"、"投稿格式"时自动激活。支持番茄小说、起点中文网、晋江文学城、知乎盐选等主流平台。
---

# 小说导出格式转换

将 Markdown 或纯文本转换为各大小说平台的投稿格式。

## 支持的平台

| 平台 | 格式 | 特点 |
|------|------|------|
| **番茄小说** | 纯文本 | 无缩进，回车分段，无空行 |
| **起点中文网** | 纯文本 | 首行缩进2字符 |
| **晋江文学城** | 纯文本 | 遵循晋江规范 |
| **知乎盐选** | 在线编辑 | 短篇2-5万字 |
| **七猫小说** | 纯文本 | 类似番茄 |
| **通用纯文本** | txt | 2字符缩进，章节间空行 |
| **Word 文档** | docx | 保留基本格式 |

## 使用方式

```bash
/novel-export [平台名] [文本内容或文件路径]

# 示例
/novel-export 番茄 [文本内容]
/novel-export 起点 [文本内容]
/novel-export 番茄 ./novel-output/我的小说/正文/
/novel-export 起点 ./正文/ --batch
/novel-export 起点 ./正文/ --batch --concurrency 3
```

## 并发控制

| 参数 | 说明 |
|------|------|
| `--batch` | 启用批量转换模式 |
| `--concurrency N` | 并发数量，默认 **3**，推荐 2-5 |

**限流应对**：遇到 429 错误自动退避，等待 5 秒重试，最多 3 次。

## 快捷指令

```
/番茄格式 [文本]    # 同 /novel-export 番茄
/起点格式 [文本]    # 同 /novel-export 起点
/晋江格式 [文本]    # 同 /novel-export 晋江
```

## 格式转换规则

| Markdown | 番茄 | 起点 | 晋江 |
|----------|------|------|------|
| `# 标题` | 删除 | 删除 | 删除 |
| `**粗体**` | 去标记 | 去标记 | 去标记 |
| 段落 | 不缩进 | 缩进2字符 | 缩进2字符 |
| 空行 | 删除 | 保留 | 保留 |

## 输出目录命名规范（必须遵守）

### 平台-文件夹名称映射

导出时**必须**使用以下固定的文件夹名称：

| 用户输入 | 输出文件夹名称 |
|----------|----------------|
| 番茄、番茄小说、番茄格式 | `番茄小说` |
| 起点、起点中文网、起点格式 | `起点中文网` |
| 晋江、晋江文学城、晋江格式 | `晋江文学城` |
| 知乎、知乎盐选、盐选 | `知乎盐选` |
| 七猫、七猫小说、七猫格式 | `七猫小说` |
| 纯文本、通用、txt | `通用纯文本` |
| Word、docx | `Word文档` |

### 导出约束

1. **文件夹名称必须统一**：无论用户输入什么变体，输出文件夹名称必须使用上表中的固定名称
2. **复用已有文件夹**：如果目标目录已存在，直接在其中导出，不得创建新的变体文件夹
3. **按章节独立导出**：批量导出时，每个章节必须导出为独立的 `.txt` 文件，禁止合并为单个文件

### 目录结构示例

```
小说目录/
├── 正文/                    # 源文件
│   ├── 第1章.md
│   └── 第2章.md
└── 导出/                    # 固定使用"导出"文件夹
    ├── 番茄小说/            # 统一命名
    │   ├── 第1章.txt        # 按章节独立导出
    │   └── 第2章.txt
    └── 起点中文网/
        ├── 第1章.txt
        └── 第2章.txt
```

## 相关资源

详细格式说明请参考 `skills/novel-export/SKILL.md`。
