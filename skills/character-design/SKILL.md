---
name: character-design
description: 角色设计工具，完成人物卡片（步骤3）→背景故事（步骤5）→人物宝典（步骤7）的完整人物深化链。当用户说"角色设计"、"人物设计"、"设计角色"、"新增角色"、"深化角色"、"完善人物"、"人物深化"时自动激活。可独立使用，也可在 snowflake-fiction 主流程中被调用。
version: 1.0.0
---

# 角色设计 Skill

覆盖雪花写作法中人物线的完整三步链：

| 步骤 | 内容 | 输出物 |
|------|------|--------|
| 步骤3 | 一页纸人物卡片 | `03-人物卡片/[类型]-[名].md` |
| 步骤5 | 人物背景故事 | `04-人物背景/[名]-背景.md` |
| 步骤7 | 人物宝典 | `06-人物宝典/[名]-宝典.md` |

## 使用时机

- 从零开始设计一个新角色
- 在已有大纲基础上深化某个角色
- 创作中途新增配角
- 修改/重写某个角色的设定

---

## 三种使用模式

### 模式A：快速卡片（仅步骤3）

只需要基础设定，不深化背景。

```
/character-design 快速 主角 都市职场女性
/character-design 快速 反派 --from 03-完整大纲.md
```

输出：人物卡片（简版）

### 模式B：完整深化（步骤3→5→7，默认）

从卡片到宝典的完整链路。

```
/character-design 主角 林小满
/character-design 反派 --from 03-完整大纲.md
/character-design 新增配角 神秘商人
```

输出：人物卡片 + 背景故事 + 人物宝典

### 模式C：局部更新（更新已有角色）

基于已有文件，只更新或补充某部分。

```
/character-design 更新 林小满 --深化背景
/character-design 更新 林小满 --重写宝典
/character-design 更新 林小满 --添加关系 王经理
```

---

## 详细执行流程

### 步骤3：人物卡片

**目标**：建立角色的核心设定骨架

**执行方式**：
1. 如果用户提供了大纲文件，先读取大纲获取故事背景
2. 询问角色类型（主角/反派/导师/配角）
3. 生成人物卡片，包含：
   - 基本信息（年龄、职业、外貌标志）
   - 核心设定（外在目标、内在需求、核心矛盾、价值观）
   - 人物弧光（开始状态→转折点→结束变化）
   - 标志性元素（口头禅、习惯动作、标志性物品）
4. 用户确认后保存，再进入步骤5

**角色类型与深度**：

| 类型 | 深度 | 说明 |
|------|------|------|
| 主角 | 完整三步 | 所有模板全填 |
| 反派 | 完整三步，重点心理 | 动机根源是关键 |
| 导师 | 步骤3+5 | 背景影响其教导方式 |
| 配角 | 步骤3 | 简版卡片即可 |
| 工具人 | 仅基本信息 | 姓名+职能 |

**参考模板**：[人物卡片完整模板](../snowflake-fiction/references/character-template.md)

---

### 步骤5：人物背景故事

**目标**：挖掘角色的过去，解释"他为什么是现在这样的人"

**执行方式**：
1. 读取步骤3生成的人物卡片
2. 深入挖掘三个维度：
   - **童年关键事件**：性格形成的根源
   - **成长经历**：第一次重大失败/成功
   - **性格形成**：最深恐惧和最强欲望的来源
3. 用叙述性语言撰写（500-800字），非问答格式
4. 确保背景与卡片设定逻辑自洽

**重点关注**：
- 主角：童年创伤或性格形成关键事件
- 反派：动机根源（为什么走上这条路？）
- 角色间的关系网络如何形成

---

### 步骤7：人物宝典

**目标**：建立详尽的角色资料库，供写作时随时查阅

**执行方式**：
1. 读取步骤3的卡片 + 步骤5的背景故事
2. 综合整理为七大分类：
   - 外部信息（外貌、穿衣、声音、走路姿态）
   - 性格特质（MBTI、优缺点、情绪模式）
   - 内在世界（恐惧、欲望、秘密、自我认知）
   - 偏好与习惯（口头禅、小动作、日常习惯）
   - 社会关系（家庭、朋友圈、职场、对立关系）
   - 物品与符号（重要物品、空间、身体符号）
   - 角色语录（代表性台词、对话风格）
3. 保存为宝典文件

---

## 输出管理

### 目录检测逻辑

```
1. 检查当前目录是否存在小说项目目录（含 00-一句话概括.md 或 01-五句式大纲.md）
2. 如果存在 → 保存到该项目目录下
3. 如果不存在 → 在当前目录创建 人物设计/[角色名]/ 目录
4. 如果用户指定路径 → 优先使用用户指定路径
```

### 项目内输出结构

```
[小说名]/
├── 03-人物卡片/
│   ├── 主角-林小满.md       ← 步骤3输出
│   └── 反派-王经理.md
├── 04-人物背景/
│   ├── 林小满-背景.md       ← 步骤5输出
│   └── 王经理-背景.md
└── 06-人物宝典/
    ├── 林小满-宝典.md       ← 步骤7输出
    └── 王经理-宝典.md
```

### 独立使用输出结构

```
[当前目录]/
└── 人物设计/
    └── [角色名]/
        ├── 人物卡片.md
        ├── 背景故事.md
        └── 人物宝典.md
```

---

## 与主流程的集成

当 `snowflake-fiction` 主 skill 执行到步骤3、5、7时，自动调用本 skill。

主流程调用方式：
```
# 主流程内部调用（用户不感知）
character-design --step 3 --context [大纲文件] --type 主角
character-design --step 5 --context [卡片文件] --name [角色名]
character-design --step 7 --context [卡片+背景] --name [角色名]
```

独立调用时，本 skill 会自动检测项目上下文，无缝衔接已有创作内容。

---

## 注意事项

1. **每步确认**：生成卡片后询问用户是否满意，确认后再进入下一步
2. **读取上下文**：如果项目目录已有大纲文件，优先读取以保持一致性
3. **避免矛盾**：新角色的设定不能与已有角色或世界观冲突
4. **配角适度**：配角不需要完整三步，简版卡片即可，避免过度设计

**参考资料**：[人物卡片完整模板](../snowflake-fiction/references/character-template.md)
