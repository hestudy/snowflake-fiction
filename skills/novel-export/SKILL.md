---
name: novel-export
version: 2.0.0
description: 将小说文本转换为各平台投稿格式。当用户说"导出小说"、"转换为平台格式"、"番茄格式"、"起点格式"、"投稿格式"时自动激活。支持番茄小说、起点中文网、晋江文学城、知乎盐选等主流平台。
allowed-tools:
  - Read
---

# 小说导出格式转换 Skill

将 Markdown 或纯文本转换为各大小说平台的投稿格式。

---

## 处理流程

```
识别目标平台 → 读取转换规则 → 去除Markdown标记 → 应用平台格式 → 输出结果
```

### 你的任务

1. **识别目标平台** - 确认用户要导出到哪个平台
2. **读取转换规则** - 从知识库获取该平台的详细规则
3. **去除 Markdown 标记** - 清理格式标记
4. **应用平台格式** - 按规则处理缩进、空行、标点等
5. **输出转换结果** - 返回转换后的纯文本

---

## 知识库引用

处理时请读取以下参考文件获取详细规则：

| 文件 | 内容 |
|------|------|
| `./references/platform-rules.md` | 各平台详细转换提示词和输出示例 |
| `./references/naming-convention.md` | 输出目录命名规范（平台映射表+目录结构） |

---

## 支持的平台

| 平台 | 格式 | 特点 |
|------|------|------|
| **番茄小说** | 纯文本 | 无缩进，回车分段，无空行 |
| **起点中文网** | 纯文本 | 首行缩进2字符 |
| **晋江文学城** | 纯文本 | 遵循晋江规范 |
| **知乎盐选** | 在线编辑 | 短篇2-5万字 |
| **七猫小说** | 纯文本 | 类似番茄 |
| **通用纯文本** | txt | 2字符缩进，章节间空行 |
| **Word 文档** | docx | 保留基本格式 |

---

## 格式转换规则

### Markdown → 平台格式

| Markdown | 番茄 | 起点 | 晋江 |
|----------|------|------|------|
| `# 标题` | 删除 | 删除 | 删除 |
| `**粗体**` | 去标记 | 去标记 | 去标记 |
| `*斜体*` | 去标记 | 去标记 | 去标记 |
| `> 引用` | 普通段落 | 普通段落 | 普通段落 |
| `---` | 删除 | 删除 | 删除 |
| `` `代码` `` | 去标记 | 去标记 | 去标记 |
| `[文字](链接)` | 只保留文字 | 只保留文字 | 只保留文字 |
| 段落 | 不缩进 | 缩进2字符 | 缩进2字符 |
| 空行 | 删除 | 保留 | 保留 |

---

## 输出格式

### 标准输出

```markdown
## 导出结果

### 目标平台：{platform}

[转换后的完整文本]
```

---

## 使用方式

### 基础用法（直接传入文本）

```
/novel-export [平台名] [文本内容]
```

### 示例

```bash
/novel-export 番茄 [文本内容]
/novel-export 起点 [文本内容]
```

### 快捷指令

```
/番茄格式 [文本]    # 同 /novel-export 番茄
/起点格式 [文本]    # 同 /novel-export 起点
/晋江格式 [文本]    # 同 /novel-export 晋江
```

---

## 注意事项

1. **编码问题**：确保使用 UTF-8 编码
2. **标点符号**：统一使用中文标点
3. **特殊字符**：删除或替换不支持的字符
4. **字数限制**：注意各平台的章节字数要求
5. **敏感词**：部分平台有敏感词过滤，需提前检查

---

## 与其他 Skill 配合

- **snowflake-fiction**：创作完成后调用此 Skill 导出
- **humanize-text**：人语化后再导出

**推荐流程**：
```
snowflake-fiction → humanize-text → novel-export
```

---

## 相关命令

| 需求 | 使用 |
|------|------|
| 人语化处理 | `/humanize-text [文本]` |
| 综合质量检查 | `/quality-check [文本]` |
| 小说复核 | `/novel-review [路径]` |

---

## 版本历史

- **2.0.0** - 拆分为 Command/Skill/Agent 三层架构；详细平台规则提取到 references/；批量处理逻辑移至 agent；Skill 精简为纯文本转换
- **1.0.3** - 添加输出目录命名规范，禁止合并文件
- **1.0.0** - 初始版本
