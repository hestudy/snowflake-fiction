---
name: novel-review
version: 2.0.0
description: |
  小说质量复核核心知识库，定义检查维度、评判标准和报告格式。当用户说"小说复核"、"章节检查"、"一致性检查"、"质量检查"、"小说质检"时自动激活。使用子代理架构，支持长篇小说的增量检查。
allowed-tools:
  - Read
---

# 小说复核：核心知识库

本 Skill 定义小说复核的检查维度、评判标准和报告格式。纯文本模式下直接执行检查，文件模式由 Agent 调度。

> 核心挑战：长篇小说可能有数十万字，一次性加载所有内容会导致上下文溢出。解决方案：子代理架构 + 分段处理 + 增量检查。

---

## 处理流程

```
识别项目结构 → 确定检查范围 → 逐项检查 → 生成报告
```

### 你的任务（纯文本模式）

1. **分析输入文本** - 识别文本类型（章节内容/大纲/人物设定）
2. **执行检查** - 根据文本内容执行适用的检查项
3. **输出报告** - 按报告模板输出检查结果
4. **给出建议** - 按严重程度排序的修改建议

---

## 检查项目详解

### 1. 角色一致性检查

**检查内容**：
- [ ] 性格行为是否符合设定
- [ ] 对话风格是否一致
- [ ] 能力等级是否合理变化
- [ ] 人物关系是否突变无铺垫
- [ ] 外貌描述是否一致
- [ ] 口头禅/习惯动作是否保持
- [ ] **人设扁平化检测**：所有角色说话风格是否雷同
- [ ] **配角工具人检测**：配角是否只为服务主角存在

**人设扁平化检测要点**：
```
1. 遮住角色名字，能否分辨是谁在说话？
2. 每个角色是否有独特的说话习惯/口头禅？
3. 配角是否有自己的目标和动机（不只是帮主角）？
```

**输入来源**：
- `人物卡片/` 或 `人物宝典/` 目录
- 待检查章节内容
- 前一章的角色状态摘要

---

### 2. 时间线检查

**检查内容**：
- [ ] 时间流逝是否合理
- [ ] 季节/天气是否连贯
- [ ] 角色年龄是否正确
- [ ] 事件顺序是否矛盾
- [ ] 白天/黑夜是否连贯

**输入来源**：
- `05-场景清单.md` 或专用时间线文件
- `review/timeline.json`（如有）
- 待检查章节中的时间标记

---

### 3. 设定一致性检查

**检查内容**：
- [ ] 修炼等级/能力体系是否一致
- [ ] 物品属性是否变化
- [ ] 地点描述是否矛盾
- [ ] 规则是否被打破（如有例外需说明）
- [ ] 专有名词是否统一

**输入来源**：
- `00-一句话概括.md`
- `03-完整大纲.md` 中的设定部分
- `04-人物宝典/` 中的能力设定

---

### 4. 大纲偏离检查

**检查内容**：
- [ ] 是否完成大纲规定的核心事件
- [ ] 是否引入未规划的支线
- [ ] 节奏是否符合规划
- [ ] 是否遗漏关键剧情点
- [ ] 字数是否在预期范围

**输入来源**：
- `03-完整大纲.md`
- `05-场景清单.md`
- 待检查章节的实际内容

---

### 5. 伏笔回收检查

**检查内容**：
- [ ] 已埋伏笔是否在规定章节回收
- [ ] 新伏笔是否正确记录
- [ ] 伏笔回收是否有铺垫
- [ ] 是否有"烂尾"伏笔（超期未回收）

**输入来源**：
- `review/foreshadowing.json`（如有）
- `05-场景清单.md` 中的伏笔标记
- 待检查章节内容

---

### 6. 文风一致性检查

**检查内容**：
- [ ] 叙事视角是否一致
- [ ] 语言风格是否统一
- [ ] 感官描写密度是否一致
- [ ] 是否有明显的AI痕迹
- [ ] 句式节奏是否保持
- [ ] **流水账检测**：情节是否有期待感
- [ ] **流水账检测**：是否有冲突/情绪变化

**流水账检测要点**：
```
流水账警告信号：
1. 连续3段以上只是"描述发生了什么"
2. 没有任何角色的情绪反应
3. 没有冲突或矛盾
4. 读完后不记得发生了什么
5. 章节结尾没有钩子
```

**输入来源**：
- 前几章作为参考样本
- 待检查章节内容

---

### 7. 开篇质量检查（仅第1-3章）

**检查内容**：
- [ ] **第1章**：开篇是否有冲突/危机/悬念
- [ ] **第1章**：信息密度是否合理（避免信息轰炸）
- [ ] **第1章**：是否避免了寡淡开场
- [ ] **第2章**：世界观是否通过剧情展开
- [ ] **第2章**：金手指/机遇是否足够吸引人
- [ ] **第3章**：是否有第一个爽点
- [ ] **第3章**：结尾是否留有钩子

**开篇问题类型**：

| 问题类型 | 表现 | 严重程度 |
|----------|------|----------|
| 寡淡开场 | 平平无奇，没吸引力 | 高 |
| 信息轰炸 | 大量设定倾倒 | 高 |
| 拖沓入题 | 迟迟不进入正题 | 中 |
| 无爽点 | 第三章没有小高潮 | 中 |
| 无钩子 | 结尾没有悬念 | 中 |

---

### 8. 推荐评估准备检查（番茄平台）

**适用范围**：计划在番茄平台发布，即将达到8万字或15万字的作品

**检查内容**：

#### A. 书名与简介检查
- [ ] 书名：是否包含冲突+悬念+结果前置
- [ ] 书名：长度是否在15字以内
- [ ] 简介：是否有3个明确钩子
- [ ] 简介：是否前置了最爽的结果

#### B. 黄金三章检查
- [ ] 第1章：前300字是否有爆点
- [ ] 第2章：是否有紧迫目标+具体阻碍
- [ ] 第3章：是否有小爽点，结尾是否有钩子

#### C. 数据预测
- [ ] 预估三章追读率能否≥35%
- [ ] 是否存在明显的"毒点"

#### D. 运营准备
- [ ] 存稿量是否足够（建议15万字）
- [ ] 是否已准备好日更4000字的节奏

**评分标准**：

| 分数段 | 建议 |
|--------|------|
| ≥80分 | 立即发起评估 |
| 60-79分 | 优化后发起 |
| <60分 | 暂停评估，先解决关键问题 |

---

## 知识库引用

处理时请读取以下参考文件获取详细规则：

| 文件 | 内容 |
|------|------|
| `./references/consistency-check-prompt.md` | 各检查子代理提示词模板 |
| `./references/character-state-template.md` | 角色状态追踪 JSON 模板 |
| `./references/timeline-template.md` | 时间线追踪 JSON 模板 |
| `./references/foreshadowing-tracker.md` | 伏笔追踪 JSON 模板 |
| `./references/review-report-template.md` | 复核报告输出模板 |

---

## 输出格式

### 标准输出

```markdown
## 复核结果

### 执行摘要

| 检查项 | 状态 | 问题数 | 严重问题 |
|--------|------|--------|----------|
| 角色一致性 | ✅/⚠️/❌ | N | N |
| ... | ... | ... | ... |

### 发现问题

| 检查项 | 问题描述 | 严重程度 | 位置 | 建议 |
|--------|----------|----------|------|------|
| ... | ... | 高/中/低 | ... | ... |

### 优先修改建议

1. [高] ...
2. [中] ...
3. [低] ...
```

### 严重程度判定标准

- **高（🔴）**：严重影响阅读体验，必须修改
- **中（🟡）**：有一定影响，建议修改
- **低（🟢）**：轻微偏差，可选修改

---

## 输出目录结构

```
[小说目录]/
└── review/                      ← 复核输出目录
    ├── latest-report.md         ← 最新检查报告
    ├── history/                 ← 历史报告
    ├── character-states.json    ← 角色状态追踪
    ├── timeline.json            ← 时间线数据
    └── foreshadowing.json       ← 伏笔追踪数据
```

---

## 与其他 Skill 配合

- **snowflake-fiction**：创作完成后调用此 Skill 检查一致性
- **humanize-text**：复核后可调用人语化修复 AI 痕迹
- **quality-check**：从内容吸引力维度补充评估
- **boring-detect**：专项流水账检测

推荐工作流：
```
snowflake-fiction → novel-review → humanize-text → novel-export
      ↑                  ↓
      └── 根据反馈修改 ←─┘
```

---

## 注意事项

1. **首次检查**：如果是第一次运行，会创建 `review/` 目录和追踪文件
2. **增量检查**：建议每写完一章就检查，问题更容易定位
3. **全面检查**：每完成一卷或每10章，进行一次全面检查
4. **追踪文件**：`review/` 目录下的 JSON 文件用于跨章节追踪，请勿手动删除
5. **性能考虑**：对于超长章节（>10000字），子代理会分段处理

---

## 版本历史

- **2.0.0** - 拆分为 Command/Skill/Agent 三层架构；Skill 精简为核心知识库；子代理调度逻辑移至 Agent
- **1.0.0** - 初始版本，所有功能集中在单个 SKILL.md
